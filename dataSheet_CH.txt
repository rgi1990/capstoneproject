Datasheet: Cup and Handle Pattern Prediction
--------------------------------------------------------------------------------

## Motivation

This project aims to predict a rare chart pattern—the "cup and handle"—in the S&P 500. It uses machine learning models to identify this pattern and provide a probabilistic prediction. The goal is to build a robust model for generating trading signals, a significant step beyond simple price forecasting.

## Composition

-   **Dataset:** The dataset contains daily historical prices, volume, and various technical indicators for all companies currently in the S&P 500.
-   **Data Points:** Each row in the dataset represents a single trading day for a single stock.
-   **Tickers:** The list of S&P 500 tickers is dynamically fetched from Wikipedia, which ensures the list is up-to-date.
-   **Confidentiality:** The data is publicly available, so there are no confidentiality concerns.

## Collection Process

-   **Data Acquisition:** The data is acquired via the **Yahoo Finance API** using the `yfinance` Python library. The script is designed to handle potential rate-limiting issues.
-   **Sampling Strategy:** The data is sampled at the close of every trading day. The project uses 5 years of historical data for each stock.
-   **Time Frame:** The data spans the last 5 years up to the date the script is run.

## Preprocessing/Cleaning/Labeling

-   **Missing Data:** A fill-forward method is applied to handle missing values, which typically occur on public holidays.
-   **Feature Engineering:** A comprehensive set of technical indicators are calculated from the raw price and volume data. These include:
    -   Moving Averages (SMA-10, SMA-50)
    -   Relative Strength Index (RSI)
    -   Moving Average Convergence Divergence (MACD)
    -   Bollinger Bands
    -   Average True Range (ATR)
-   **Labeling:** The target variable, a binary label (`1` for pattern, `0` for no pattern), is generated by a custom function that looks for a preceding uptrend, a U-shaped cup, a short handle, and low volume. This process creates a highly **imbalanced dataset**.

## Uses

-   **Primary Use:** Training and evaluating machine learning models to predict the cup and handle pattern.
-   **Alternative Uses:**
    -   Academic research into chart pattern recognition using machine learning.
    -   Backtesting other technical trading strategies.
    -   Developing new feature sets for stock market analysis.

## Distribution

-   **Current Distribution:** The dataset is created locally from public API calls and is not publicly distributed.
-   **IP/Licensing:** All data sourced from Yahoo Finance is subject to their Terms of Service. Non-commercial use is generally permitted, but any commercial application would require additional licensing. Derived datasets should acknowledge Yahoo Finance as the source.

## Maintenance

-   **Data Source:** Yahoo Finance maintains the data and provides daily updates.
-   **Availability:** The data is dependent on the continued availability of the Yahoo Finance API.
-   **Quality Control:** The script includes a data cleaning step, but the quality of the raw data should be regularly checked for anomalies.